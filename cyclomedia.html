<!doctype html>
<html lang="en">
<head>
<title>X3Dom demo</title>
<meta charset="utf-8">
 <!-- Bootstrap -->
 <!--
 <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
 <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
 -->
 <link rel="stylesheet" type="text/css" href="http://x3dom.org/download/dev/x3dom.css" />
 <script src="http://x3dom.org/download/dev/x3dom.js"></script>
 <script src="./bower_components/d3/d3.min.js"></script>
 
 <script src="http://cdnjs.cloudflare.com/ajax/libs/proj4js/2.2.1/proj4.js"></script>
 
 <!-- add some cow... -->
 <script src="../cow/lib/underscore/underscore-min.js"></script>
 <script src="../cow/dist/cow.min.js"></script>
 <script src="../cow/test/cow.data.js"></script>
 
<style>
	html, body {
	    width: 100%;
	    height: 100%;
	    margin: 0px;
	    padding: 0px;
	    color: white;
	}
	
	.popup {
		color: white;
		font-size: 20pt;
	}
	.title {
	    color: white;
	    font-size: 40pt;
	    position: absolute;
	    top: 20px;
	    z-index: 10;
	}
	#webgl1 {
	    width: 100%;
	    display: block;
	}
	
	#debug {
	    display: block;
		position: absolute;
		right: 20px;
		top: 20px;
		width: 200px;
		height: 200px;
	}
	#viewMat {
		position: absolute;
		color: white;
		bottom: 0px;
	}
	
</style>

<script>


var themeconfig = {
	gray: {
	 materials: {
		pand: {shininess:'0.078125', ambientIntensity:'0.142857', emissiveColor: 'none',diffuseColor: 'gray',transparency: '0'},
		waterloop: {specularColor: '0.823529 0.705882 0.54902', diffuseColor: 'gray', shininess: '1'},
		voetpad: {diffuseColor: 'gray'},
		rijbaan_lokale_weg: {diffuseColor: 'gray'},
		open_verharding:{diffuseColor: 'gray'},
		erf:{diffuseColor: 'gray'},
		groenvoorziening:{diffuseColor: 'green'},
		'gemengd bos':{diffuseColor: 'green'},
		struiken: {diffuseColor: 'green'},
		dek:{diffuseColor: 'gray'},
		pijler: {diffuseColor: 'gray'},
		light: {emissiveColor: 'yellow', transparency: 0},
		post: {diffuseColor: 'gray'},
		tree: {diffuseColor: 'green'},
		scene: {skyColor: '0.1 0.1 0.1'}
	 }
	},
	light: {
	  materials: {
		pand: {emissiveColor: '0.9 0.9 0.9',diffuseColor: 'white'},
		waterloop: {diffuseColor: '0.7 0.7 1.0'},
		light: {emissiveColor: 'black', transparency: 1},
		scene: {skyColor: '0.4 0.6 0.8'},
		erf:{diffuseColor: 'white'},
	  }
	},
	functional: {
		materials: {
			fietspad:{diffuseColor: 'brown'},
			inrit: {diffuseColor: 'gray'},
			'OV-baan':{diffuseColor: 'gray'},
			overweg:{diffuseColor: 'gray'},
			parkeervlak:{diffuseColor: 'gray'},
			'rijbaan autosnelweg': {diffuseColor: 'gray'},
			'rijbaan autoweg': {diffuseColor: 'gray'},
			'rijbaan lokale weg':{diffuseColor: 'gray'},
			'rijbaan regionale weg':{diffuseColor: 'gray'},
			spoorbaan:{diffuseColor: 'darkGray'},
			transitie:{diffuseColor: 'purple'},
			voetgangersgebied:{diffuseColor: 'white'},
			voetpad:{diffuseColor: 'white'},
			'voetpad op trap':{diffuseColor: 'white'},
			woonerf:{diffuseColor: 'gray'},
		}
	}
};   
</script>

</head>
<body>
	<div id="webgl1">
	    <div class="title">Cyclomedia naar Minecraft</div>
	    <div id="viewMat"></div>
	</div>
	<div id="debug"></div>


<script src="x3d_map.js"></script>

<script type="">


// viewpoint changed
//http://x3dom.org/x3dom/example/x3dom_uiEvents.html
function viewFunc(evt)
{
	// show viewpoint values
	if (evt)
	{
		var pos = evt.position;
		var rot = evt.orientation;
		var mat = evt.matrix;
	
		var camPos = pos.x.toFixed(4)+' '+pos.y.toFixed(4)+' '+pos.z.toFixed(4);
		var camRot = rot[0].x.toFixed(4)+' '+rot[0].y.toFixed(4)+' '+rot[0].z.toFixed(4)+' '+rot[1].toFixed(4);
	
		document.getElementById("viewMat").innerHTML = "&ltViewpoint position='" + 
														camPos + "' orientation='" + camRot + "'&gt";
	}
	
	// update 2d marker also if camera changes since projection is now wrong
	/*
	var trans = x3d.fields.SFVec3f.parse(document.getElementById('bar').getAttribute("translation"));
	var pos2d = runtime.calcPagePos(trans.x, trans.y, trans.z);
	var anno = document.getElementById("anno2d");
	
	anno.innerHTML = "(" + pos2d[0] + ", " + pos2d[1] + ")";
	anno.style.left = (pos2d[0]+1) + "px";
	anno.style.top = (pos2d[1]+1) + "px";
	*/
}
document.onload= function() 
{
	document.getElementById('viewpointwebgl1').addEventListener('viewpointChanged', viewFunc, false);
    viewFunc(null);
}

var tilesize = 100;
/** End of UI settings **/
var loadlist = [
    //POINTS
	{name: 'denbosch',		reload: true, url: './data/bgt_denboschpoints.php'}
	//{name: 'ahn2objects',		reload: true, url: './data/bgt_ahn2objectpoints.php'},
	//Blokjes
	//{name: 'blokjes',		reload: true, url: './data/minecraft_blocks.php'}
]; 

render(wxs3, 'webgl1', {
	loadlist: loadlist,
	bbox: '148949,411257, 149049,411357' //Den Bosch
});

</script>
</body>
</html>